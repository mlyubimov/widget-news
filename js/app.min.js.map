{"version":3,"sources":["widget.js"],"names":["ul","document","createElement","className","btn","type","id","ariaLabel","widget","styleWidget","currentElem","listShow","data","title","author","date","photo","link","init","block","querySelector","concat","this","classList","add","addStyle","i","length","li","insertAdjacentHTML","Date","toLocaleDateString","toLocaleTimeString","slice","appendChild","textContent","conjugationNumber","console","log","style","rel","href","head","quantity","addEventListener","event","target","closest","contains","status","remove","relatedTarget","parentNode","querySelectorAll"],"mappings":"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","sourcesContent":["const ul = document.createElement('ul');\r\nul.className = 'widget__list';\r\n\r\nconst btn = document.createElement('button');\r\nbtn.type = 'button';\r\nbtn.className = 'widget__btn';\r\nbtn.id = 'show-news';\r\nbtn.ariaLabel = 'Открыть больше новостей'\r\n\r\nconst widget = {\r\n\tid: 'widget',\r\n\tstyleWidget: 'css/widget.css',\r\n\tcurrentElem: null,\r\n\tlistShow: false,\r\n\tdata: [\r\n\t\t{\r\n\t\t\ttitle: 'Samsung назвал смартфоны, которые обновят до Android 11',\r\n\t\t\tauthor: 'Риа Новости',\r\n\t\t\tdate: 'December 02 2020 11:57:44 GMT+0300',\r\n\t\t\tphoto: 'https://cdn25.img.ria.ru/images/07e4/09/17/1577669685_2:0:918:515_1600x0_80_0_0_fb2ee9a9ce8b86b1b1f2548c37c13b80.jpg.webp',\r\n\t\t\tlink: 'https://ria.ru/20201202/samsung-1587307350.html'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Apple намерена увеличить автономность Apple Watch изящным способом',\r\n\t\t\tauthor: 'mobiltelefon.ru',\r\n\t\t\tdate: 'September 02 2020 09:56:10 GMT+0300',\r\n\t\t\tphoto: 'https://mobiltelefon.ru/photo/december20/02/apple_namerena_uvelichit_avtonomnost_apple_watch_elegantnym_sposobom_picture6_0_resize.jpg',\r\n\t\t\tlink: 'https://mobiltelefon.ru/post_1606892219.html'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'https://lenta.ru/news/2020/12/02/forty_two/',\r\n\t\t\tauthor: 'Lenta.ru',\r\n\t\t\tdate: 'May 20 2020 14:57:02\t GMT+0300',\r\n\t\t\tphoto: 'https://icdn.lenta.ru/images/2020/12/02/14/20201202145731479/pic_c11f850f0357b56f6c760881361f3e15.jpg',\r\n\t\t\tlink: 'https://lenta.ru/news/2020/12/02/forty_two/'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'В Cyberpunk 2077 будет доступен фоторежим со множеством настроек',\r\n\t\t\tauthor: 'Игромания онлайн',\r\n\t\t\tdate: 'September 10 2020 17:18:10 GMT+0300',\r\n\t\t\tphoto: 'https://cdn.igromania.ru/mnt/news/9/e/f/a/9/5/100357/ded648b0d3ea14a8_848x477.jpg',\r\n\t\t\tlink: 'https://www.igromania.ru/news/100357/V_Cyberpunk_2077_budet_dostupen_fotorezhim_so_mnozhestvom_nastroek.html'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Типичная уникальность: астрономы объяснили странности Солнечной системы',\r\n\t\t\tauthor: 'Вести.Ru',\r\n\t\t\tdate: 'May 20 2020 11:27:02\t GMT+0300',\r\n\t\t\tphoto: 'https://cdn-st1.rtr-vesti.ru/vh/pictures/xw/307/144/3.jpg',\r\n\t\t\tlink: 'https://www.vesti.ru/nauka/article/2493310'\r\n\t\t}\r\n\t],\r\n\tinit: function() {\r\n\t\tconst block = document.querySelector(`#${this.id}`);\r\n\t\tif(block) {\r\n\t\t\tblock.classList.add('widget')\r\n\t\t\tthis.addStyle();\r\n\r\n\t\t\tfor (let i = 0; i < this.data.length; i++) {\r\n\t\t\t\tconst li = document.createElement('li');\r\n\t\t\t\tli.className = 'widget__item';\r\n\r\n\t\t\t\tli.insertAdjacentHTML('beforeEnd', `\r\n\t\t\t\t<div class=\"widget__photo\" style=\"background-image: url(${this.data[i].photo})\"></div>\r\n\t\t\t\t<div class=\"widget__content-container\">\r\n\t\t\t\t\t<h2 class=\"widget__title\">${this.data[i].title}</h2>\r\n\t\t\t\t\t<p class=\"widget__content widget__author\">${this.data[i].author}</p>\r\n\t\t\t\t\t<div class=\"widget__header-container\">\r\n\t\t\t\t\t\t<a class=\"widget__link\" href=\"${this.data[i].link}\" aria-label=\"Перейти на подробное описание статьи «${this.data[i].title}» от аватара ${this.data[i].author}\">Подбробнее</a>\r\n\t\t\t\t\t\t<div class=\"widget__status widget__status--not-read\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p class=\"widget__date\">${new Date(this.data[i].date).toLocaleDateString()} ${new Date(this.data[i].date).toLocaleTimeString().slice(0,-3)}</p>\r\n\t\t\t\t</div>`);\r\n\t\t\t\t\r\n\t\t\t\tul.appendChild(li);\r\n\t\t\t}\r\n\r\n\t\t\tbtn.textContent = this.conjugationNumber(this.data.length - 1);\r\n\t\t\tul.appendChild(btn);\r\n\r\n\t\t\tblock.appendChild(ul)\r\n\t\t} else {\r\n\t\t\tconsole.log(`Block id = \"${id}\" not found`);\r\n\t\t}\r\n\t},\r\n\taddStyle: function() { \r\n        const style = document.createElement('link'); \r\n        style.rel = 'stylesheet'; \r\n        style.type = 'text/css'; \r\n        style.href = this.styleWidget; \r\n        document.head.appendChild(style); \r\n\t},\r\n\tconjugationNumber: function(quantity) {\r\n\t\tif(quantity > 4 && quantity < 21) {\r\n\t\t\treturn `Развернуть оставшиеся ${quantity} новостей`\r\n\t\t} else if (quantity === 1) {\r\n\t\t\treturn `Развернуть оставшуюся ${quantity} новость`\r\n\t\t} else if (quantity === 2 || quantity === 3 || quantity === 4) {\r\n\t\t\treturn `Развернуть оставшиеся ${quantity} новости`\r\n\t\t} else {\r\n\t\t\treturn `Развернуть оставшиеся ${quantity} новостей`\r\n\t\t}\r\n\t}\r\n};\r\n\r\nul.addEventListener('mouseover', (event) => {\r\n\tif (widget.currentElem) return;\r\n\r\n\tconst target = event.target.closest('li')\r\n\r\n\tif(!target) return;\r\n\r\n\tif(!ul.contains(target)) return;\r\n\r\n\tconst status = target.querySelector('.widget__status');\r\n\tstatus.classList.remove('widget__status--not-read');\r\n\tstatus.classList.add('widget__status--read');\r\n\r\n\twidget.currentElem = target;\r\n})\r\n\r\nul.addEventListener('mouseout', (event) => {\r\n\tif (!widget.currentElem) return;\r\n\r\n\tlet relatedTarget = event.relatedTarget;\r\n\r\n\twhile (relatedTarget) {\r\n\t\t// поднимаемся по дереву элементов и проверяем – внутри ли мы currentElem или нет\r\n\t\t// если да, то это переход внутри элемента – игнорируем\r\n\t\tif (relatedTarget === widget.currentElem) return;\r\n\t\r\n\t\trelatedTarget = relatedTarget.parentNode;\r\n\t}\r\n\r\n\twidget.currentElem = null;\r\n})\r\n\r\nbtn.addEventListener('click', () => {\r\n\tif(widget.listShow === false) {\r\n\t\tul.classList.add('widget__list--show');\r\n\t\tbtn.textContent = 'Свернуть новости';\r\n\t\twidget.listShow = true;\r\n\t} else if (widget.listShow === true) {\r\n\t\tul.classList.remove('widget__list--show');\r\n\t\tbtn.textContent = widget.conjugationNumber(ul.querySelectorAll('.widget__item').length - 1);\r\n\t\twidget.listShow = false;\r\n\t}\r\n})\r\n\r\nwidget.init();"],"file":"app.min.js"}