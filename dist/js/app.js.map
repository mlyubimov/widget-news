{"version":3,"sources":["widget.js"],"names":["ul","document","createElement","className","btn","type","id","ariaLabel","widget","styleWidget","currentElem","listShow","data","title","author","date","photo","link","init","block","querySelector","classList","add","addStyle","i","length","li","insertAdjacentHTML","Date","toLocaleDateString","toLocaleTimeString","slice","appendChild","textContent","conjugationNumber","console","log","style","rel","href","head","quantity","addEventListener","event","target","closest","contains","status","remove","relatedTarget","parentNode","querySelectorAll"],"mappings":";;AAAA,IAAMA,EAAE,GAAGC,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAX;AACAF,EAAE,CAACG,SAAH,GAAe,cAAf;AAEA,IAAMC,GAAG,GAAGH,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAZ;AACAE,GAAG,CAACC,IAAJ,GAAW,QAAX;AACAD,GAAG,CAACD,SAAJ,GAAgB,aAAhB;AACAC,GAAG,CAACE,EAAJ,GAAS,WAAT;AACAF,GAAG,CAACG,SAAJ,GAAgB,yBAAhB;AAEA,IAAMC,MAAM,GAAG;AACdF,EAAAA,EAAE,EAAE,QADU;AAEdG,EAAAA,WAAW,EAAE,gBAFC;AAGdC,EAAAA,WAAW,EAAE,IAHC;AAIdC,EAAAA,QAAQ,EAAE,KAJI;AAKdC,EAAAA,IAAI,EAAE,CACL;AACCC,IAAAA,KAAK,EAAE,yDADR;AAECC,IAAAA,MAAM,EAAE,aAFT;AAGCC,IAAAA,IAAI,EAAE,oCAHP;AAICC,IAAAA,KAAK,EAAE,2HAJR;AAKCC,IAAAA,IAAI,EAAE;AALP,GADK,EAQL;AACCJ,IAAAA,KAAK,EAAE,oEADR;AAECC,IAAAA,MAAM,EAAE,iBAFT;AAGCC,IAAAA,IAAI,EAAE,qCAHP;AAICC,IAAAA,KAAK,EAAE,wIAJR;AAKCC,IAAAA,IAAI,EAAE;AALP,GARK,EAeL;AACCJ,IAAAA,KAAK,EAAE,6CADR;AAECC,IAAAA,MAAM,EAAE,UAFT;AAGCC,IAAAA,IAAI,EAAE,gCAHP;AAICC,IAAAA,KAAK,EAAE,uGAJR;AAKCC,IAAAA,IAAI,EAAE;AALP,GAfK,EAsBL;AACCJ,IAAAA,KAAK,EAAE,kEADR;AAECC,IAAAA,MAAM,EAAE,kBAFT;AAGCC,IAAAA,IAAI,EAAE,qCAHP;AAICC,IAAAA,KAAK,EAAE,mFAJR;AAKCC,IAAAA,IAAI,EAAE;AALP,GAtBK,EA6BL;AACCJ,IAAAA,KAAK,EAAE,yEADR;AAECC,IAAAA,MAAM,EAAE,UAFT;AAGCC,IAAAA,IAAI,EAAE,gCAHP;AAICC,IAAAA,KAAK,EAAE,2DAJR;AAKCC,IAAAA,IAAI,EAAE;AALP,GA7BK,CALQ;AA0CdC,EAAAA,IAAI,EAAE,gBAAW;AAChB,QAAMC,KAAK,GAAGlB,QAAQ,CAACmB,aAAT,YAA2B,KAAKd,EAAhC,EAAd;;AACA,QAAGa,KAAH,EAAU;AACTA,MAAAA,KAAK,CAACE,SAAN,CAAgBC,GAAhB,CAAoB,QAApB;AACA,WAAKC,QAAL;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKZ,IAAL,CAAUa,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AAC1C,YAAME,EAAE,GAAGzB,QAAQ,CAACC,aAAT,CAAuB,IAAvB,CAAX;AACAwB,QAAAA,EAAE,CAACvB,SAAH,GAAe,cAAf;AAEAuB,QAAAA,EAAE,CAACC,kBAAH,CAAsB,WAAtB,iFAC0D,KAAKf,IAAL,CAAUY,CAAV,EAAaR,KADvE,kHAG6B,KAAKJ,IAAL,CAAUY,CAAV,EAAaX,KAH1C,0EAI6C,KAAKD,IAAL,CAAUY,CAAV,EAAaV,MAJ1D,oHAMkC,KAAKF,IAAL,CAAUY,CAAV,EAAaP,IAN/C,sOAM0G,KAAKL,IAAL,CAAUY,CAAV,EAAaX,KANvH,0EAM4I,KAAKD,IAAL,CAAUY,CAAV,EAAaV,MANzJ,mNAS2B,IAAIc,IAAJ,CAAS,KAAKhB,IAAL,CAAUY,CAAV,EAAaT,IAAtB,EAA4Bc,kBAA5B,EAT3B,cAS+E,IAAID,IAAJ,CAAS,KAAKhB,IAAL,CAAUY,CAAV,EAAaT,IAAtB,EAA4Be,kBAA5B,GAAiDC,KAAjD,CAAuD,CAAvD,EAAyD,CAAC,CAA1D,CAT/E;AAYA/B,QAAAA,EAAE,CAACgC,WAAH,CAAeN,EAAf;AACA;;AAEDtB,MAAAA,GAAG,CAAC6B,WAAJ,GAAkB,KAAKC,iBAAL,CAAuB,KAAKtB,IAAL,CAAUa,MAAV,GAAmB,CAA1C,CAAlB;AACAzB,MAAAA,EAAE,CAACgC,WAAH,CAAe5B,GAAf;AAEAe,MAAAA,KAAK,CAACa,WAAN,CAAkBhC,EAAlB;AACA,KA3BD,MA2BO;AACNmC,MAAAA,OAAO,CAACC,GAAR,wBAA2B9B,EAA3B;AACA;AACD,GA1Ea;AA2EdiB,EAAAA,QAAQ,EAAE,oBAAW;AACd,QAAMc,KAAK,GAAGpC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAd;AACAmC,IAAAA,KAAK,CAACC,GAAN,GAAY,YAAZ;AACAD,IAAAA,KAAK,CAAChC,IAAN,GAAa,UAAb;AACAgC,IAAAA,KAAK,CAACE,IAAN,GAAa,KAAK9B,WAAlB;AACAR,IAAAA,QAAQ,CAACuC,IAAT,CAAcR,WAAd,CAA0BK,KAA1B;AACN,GAjFa;AAkFdH,EAAAA,iBAAiB,EAAE,2BAASO,QAAT,EAAmB;AACrC,QAAGA,QAAQ,GAAG,CAAX,IAAgBA,QAAQ,GAAG,EAA9B,EAAkC;AACjC,iJAAgCA,QAAhC;AACA,KAFD,MAEO,IAAIA,QAAQ,KAAK,CAAjB,EAAoB;AAC1B,iJAAgCA,QAAhC;AACA,KAFM,MAEA,IAAIA,QAAQ,KAAK,CAAb,IAAkBA,QAAQ,KAAK,CAA/B,IAAoCA,QAAQ,KAAK,CAArD,EAAwD;AAC9D,iJAAgCA,QAAhC;AACA,KAFM,MAEA;AACN,iJAAgCA,QAAhC;AACA;AACD;AA5Fa,CAAf;AA+FAzC,EAAE,CAAC0C,gBAAH,CAAoB,WAApB,EAAiC,UAACC,KAAD,EAAW;AAC3C,MAAInC,MAAM,CAACE,WAAX,EAAwB;AAExB,MAAMkC,MAAM,GAAGD,KAAK,CAACC,MAAN,CAAaC,OAAb,CAAqB,IAArB,CAAf;AAEA,MAAG,CAACD,MAAJ,EAAY;AAEZ,MAAG,CAAC5C,EAAE,CAAC8C,QAAH,CAAYF,MAAZ,CAAJ,EAAyB;AAEzB,MAAMG,MAAM,GAAGH,MAAM,CAACxB,aAAP,CAAqB,iBAArB,CAAf;AACA2B,EAAAA,MAAM,CAAC1B,SAAP,CAAiB2B,MAAjB,CAAwB,0BAAxB;AACAD,EAAAA,MAAM,CAAC1B,SAAP,CAAiBC,GAAjB,CAAqB,sBAArB;AAEAd,EAAAA,MAAM,CAACE,WAAP,GAAqBkC,MAArB;AACA,CAdD;AAgBA5C,EAAE,CAAC0C,gBAAH,CAAoB,UAApB,EAAgC,UAACC,KAAD,EAAW;AAC1C,MAAI,CAACnC,MAAM,CAACE,WAAZ,EAAyB;AAEzB,MAAIuC,aAAa,GAAGN,KAAK,CAACM,aAA1B;;AAEA,SAAOA,aAAP,EAAsB;AACrB;AACA;AACA,QAAIA,aAAa,KAAKzC,MAAM,CAACE,WAA7B,EAA0C;AAE1CuC,IAAAA,aAAa,GAAGA,aAAa,CAACC,UAA9B;AACA;;AAED1C,EAAAA,MAAM,CAACE,WAAP,GAAqB,IAArB;AACA,CAdD;AAgBAN,GAAG,CAACsC,gBAAJ,CAAqB,OAArB,EAA8B,YAAM;AACnC,MAAGlC,MAAM,CAACG,QAAP,KAAoB,KAAvB,EAA8B;AAC7BX,IAAAA,EAAE,CAACqB,SAAH,CAAaC,GAAb,CAAiB,oBAAjB;AACAlB,IAAAA,GAAG,CAAC6B,WAAJ,GAAkB,kBAAlB;AACAzB,IAAAA,MAAM,CAACG,QAAP,GAAkB,IAAlB;AACA,GAJD,MAIO,IAAIH,MAAM,CAACG,QAAP,KAAoB,IAAxB,EAA8B;AACpCX,IAAAA,EAAE,CAACqB,SAAH,CAAa2B,MAAb,CAAoB,oBAApB;AACA5C,IAAAA,GAAG,CAAC6B,WAAJ,GAAkBzB,MAAM,CAAC0B,iBAAP,CAAyBlC,EAAE,CAACmD,gBAAH,CAAoB,eAApB,EAAqC1B,MAArC,GAA8C,CAAvE,CAAlB;AACAjB,IAAAA,MAAM,CAACG,QAAP,GAAkB,KAAlB;AACA;AACD,CAVD;AAYAH,MAAM,CAACU,IAAP","file":"app.js","sourcesContent":["const ul = document.createElement('ul');\r\nul.className = 'widget__list';\r\n\r\nconst btn = document.createElement('button');\r\nbtn.type = 'button';\r\nbtn.className = 'widget__btn';\r\nbtn.id = 'show-news';\r\nbtn.ariaLabel = 'Открыть больше новостей'\r\n\r\nconst widget = {\r\n\tid: 'widget',\r\n\tstyleWidget: 'css/widget.css',\r\n\tcurrentElem: null,\r\n\tlistShow: false,\r\n\tdata: [\r\n\t\t{\r\n\t\t\ttitle: 'Samsung назвал смартфоны, которые обновят до Android 11',\r\n\t\t\tauthor: 'Риа Новости',\r\n\t\t\tdate: 'December 02 2020 11:57:44 GMT+0300',\r\n\t\t\tphoto: 'https://cdn25.img.ria.ru/images/07e4/09/17/1577669685_2:0:918:515_1600x0_80_0_0_fb2ee9a9ce8b86b1b1f2548c37c13b80.jpg.webp',\r\n\t\t\tlink: 'https://ria.ru/20201202/samsung-1587307350.html'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Apple намерена увеличить автономность Apple Watch изящным способом',\r\n\t\t\tauthor: 'mobiltelefon.ru',\r\n\t\t\tdate: 'September 02 2020 09:56:10 GMT+0300',\r\n\t\t\tphoto: 'https://mobiltelefon.ru/photo/december20/02/apple_namerena_uvelichit_avtonomnost_apple_watch_elegantnym_sposobom_picture6_0_resize.jpg',\r\n\t\t\tlink: 'https://mobiltelefon.ru/post_1606892219.html'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'https://lenta.ru/news/2020/12/02/forty_two/',\r\n\t\t\tauthor: 'Lenta.ru',\r\n\t\t\tdate: 'May 20 2020 14:57:02\t GMT+0300',\r\n\t\t\tphoto: 'https://icdn.lenta.ru/images/2020/12/02/14/20201202145731479/pic_c11f850f0357b56f6c760881361f3e15.jpg',\r\n\t\t\tlink: 'https://lenta.ru/news/2020/12/02/forty_two/'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'В Cyberpunk 2077 будет доступен фоторежим со множеством настроек',\r\n\t\t\tauthor: 'Игромания онлайн',\r\n\t\t\tdate: 'September 10 2020 17:18:10 GMT+0300',\r\n\t\t\tphoto: 'https://cdn.igromania.ru/mnt/news/9/e/f/a/9/5/100357/ded648b0d3ea14a8_848x477.jpg',\r\n\t\t\tlink: 'https://www.igromania.ru/news/100357/V_Cyberpunk_2077_budet_dostupen_fotorezhim_so_mnozhestvom_nastroek.html'\r\n\t\t},\r\n\t\t{\r\n\t\t\ttitle: 'Типичная уникальность: астрономы объяснили странности Солнечной системы',\r\n\t\t\tauthor: 'Вести.Ru',\r\n\t\t\tdate: 'May 20 2020 11:27:02\t GMT+0300',\r\n\t\t\tphoto: 'https://cdn-st1.rtr-vesti.ru/vh/pictures/xw/307/144/3.jpg',\r\n\t\t\tlink: 'https://www.vesti.ru/nauka/article/2493310'\r\n\t\t}\r\n\t],\r\n\tinit: function() {\r\n\t\tconst block = document.querySelector(`#${this.id}`);\r\n\t\tif(block) {\r\n\t\t\tblock.classList.add('widget')\r\n\t\t\tthis.addStyle();\r\n\r\n\t\t\tfor (let i = 0; i < this.data.length; i++) {\r\n\t\t\t\tconst li = document.createElement('li');\r\n\t\t\t\tli.className = 'widget__item';\r\n\r\n\t\t\t\tli.insertAdjacentHTML('beforeEnd', `\r\n\t\t\t\t<div class=\"widget__photo\" style=\"background-image: url(${this.data[i].photo})\"></div>\r\n\t\t\t\t<div class=\"widget__content-container\">\r\n\t\t\t\t\t<h2 class=\"widget__title\">${this.data[i].title}</h2>\r\n\t\t\t\t\t<p class=\"widget__content widget__author\">${this.data[i].author}</p>\r\n\t\t\t\t\t<div class=\"widget__header-container\">\r\n\t\t\t\t\t\t<a class=\"widget__link\" href=\"${this.data[i].link}\" aria-label=\"Перейти на подробное описание статьи «${this.data[i].title}» от аватара ${this.data[i].author}\">Подбробнее</a>\r\n\t\t\t\t\t\t<div class=\"widget__status widget__status--not-read\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p class=\"widget__date\">${new Date(this.data[i].date).toLocaleDateString()} ${new Date(this.data[i].date).toLocaleTimeString().slice(0,-3)}</p>\r\n\t\t\t\t</div>`);\r\n\t\t\t\t\r\n\t\t\t\tul.appendChild(li);\r\n\t\t\t}\r\n\r\n\t\t\tbtn.textContent = this.conjugationNumber(this.data.length - 1);\r\n\t\t\tul.appendChild(btn);\r\n\r\n\t\t\tblock.appendChild(ul)\r\n\t\t} else {\r\n\t\t\tconsole.log(`Block id = \"${id}\" not found`);\r\n\t\t}\r\n\t},\r\n\taddStyle: function() { \r\n        const style = document.createElement('link'); \r\n        style.rel = 'stylesheet'; \r\n        style.type = 'text/css'; \r\n        style.href = this.styleWidget; \r\n        document.head.appendChild(style); \r\n\t},\r\n\tconjugationNumber: function(quantity) {\r\n\t\tif(quantity > 4 && quantity < 21) {\r\n\t\t\treturn `Развернуть оставшиеся ${quantity} новостей`\r\n\t\t} else if (quantity === 1) {\r\n\t\t\treturn `Развернуть оставшуюся ${quantity} новость`\r\n\t\t} else if (quantity === 2 || quantity === 3 || quantity === 4) {\r\n\t\t\treturn `Развернуть оставшиеся ${quantity} новости`\r\n\t\t} else {\r\n\t\t\treturn `Развернуть оставшиеся ${quantity} новостей`\r\n\t\t}\r\n\t}\r\n};\r\n\r\nul.addEventListener('mouseover', (event) => {\r\n\tif (widget.currentElem) return;\r\n\r\n\tconst target = event.target.closest('li')\r\n\r\n\tif(!target) return;\r\n\r\n\tif(!ul.contains(target)) return;\r\n\r\n\tconst status = target.querySelector('.widget__status');\r\n\tstatus.classList.remove('widget__status--not-read');\r\n\tstatus.classList.add('widget__status--read');\r\n\r\n\twidget.currentElem = target;\r\n})\r\n\r\nul.addEventListener('mouseout', (event) => {\r\n\tif (!widget.currentElem) return;\r\n\r\n\tlet relatedTarget = event.relatedTarget;\r\n\r\n\twhile (relatedTarget) {\r\n\t\t// поднимаемся по дереву элементов и проверяем – внутри ли мы currentElem или нет\r\n\t\t// если да, то это переход внутри элемента – игнорируем\r\n\t\tif (relatedTarget === widget.currentElem) return;\r\n\t\r\n\t\trelatedTarget = relatedTarget.parentNode;\r\n\t}\r\n\r\n\twidget.currentElem = null;\r\n})\r\n\r\nbtn.addEventListener('click', () => {\r\n\tif(widget.listShow === false) {\r\n\t\tul.classList.add('widget__list--show');\r\n\t\tbtn.textContent = 'Свернуть новости';\r\n\t\twidget.listShow = true;\r\n\t} else if (widget.listShow === true) {\r\n\t\tul.classList.remove('widget__list--show');\r\n\t\tbtn.textContent = widget.conjugationNumber(ul.querySelectorAll('.widget__item').length - 1);\r\n\t\twidget.listShow = false;\r\n\t}\r\n})\r\n\r\nwidget.init();"]}